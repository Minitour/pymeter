
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>config &#8212; pymeter Documentation (0.1.x)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/flask.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/eldaduzman/pymeter/main/docs/user-guide/source/_static/pymeter-logo.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="samplers" href="samplers.html" />
    <link rel="prev" title="Api Documentation" href="api.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="samplers.html" title="samplers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api.html" title="Api Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pymeter Documentation (0.1.x)</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="api.html" accesskey="U">Api Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">config</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-pymeter.api.config">
<span id="config"></span><h1>config<a class="headerlink" href="#module-pymeter.api.config" title="Permalink to this heading">¶</a></h1>
<p>The config module contain classes that define the overall structure of the test script.
Here we will define the overall plan, the setup and teardown processes and the load shapes that the test script generate.</p>
<section id="example-1">
<h2>example - 1:<a class="headerlink" href="#example-1" title="Permalink to this heading">¶</a></h2>
<p>In this example we use the standard python unittest module with setup and teardown,
The test case it self will rump up 10 threads in 1 second and hold the load for additional 10 seconds.
Note that the setup and teardown code is executed outside of JMeter’s context in this example.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">TestCase</span><span class="p">,</span> <span class="n">main</span>
<span class="kn">from</span> <span class="nn">pymeter.api.config</span> <span class="kn">import</span> <span class="n">TestPlan</span><span class="p">,</span> <span class="n">ThreadGroupWithRampUpAndHold</span>
<span class="kn">from</span> <span class="nn">pymeter.api.samplers</span> <span class="kn">import</span> <span class="n">HttpSampler</span>


<span class="k">class</span> <span class="nc">TestTestPlanClass</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setUpClass&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_case_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># create HTTP sampler, sends a get request to the given url</span>
        <span class="n">http_sampler</span> <span class="o">=</span> <span class="n">HttpSampler</span><span class="p">(</span><span class="s2">&quot;echo_get_request&quot;</span><span class="p">,</span> <span class="s2">&quot;https://postman-echo.com/get?var=1&quot;</span><span class="p">)</span>

        <span class="c1"># create a thread group that will rump up 10 threads in 1 second and hold the load for additional 10 seconds, give it the http sampler as a child input</span>
        <span class="n">thread_group_main</span> <span class="o">=</span> <span class="n">ThreadGroupWithRampUpAndHold</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">http_sampler</span><span class="p">)</span>

        <span class="c1"># create a test plan with the required thread group</span>
        <span class="n">test_plan</span> <span class="o">=</span> <span class="n">TestPlan</span><span class="p">(</span><span class="n">thread_group_main</span><span class="p">)</span>

        <span class="c1"># run the test plan and take the results</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="n">test_plan</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertLess</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">sample_time_99_percentile_milliseconds</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">tearDownClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tearDownClass&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="example-2">
<h2>example - 2:<a class="headerlink" href="#example-2" title="Permalink to this heading">¶</a></h2>
<dl>
<dt>If for some reason it is needed for you to run the setup and teardown code from with in the JMeter context, here’s how you can do it:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymeter.api.config</span> <span class="kn">import</span> <span class="n">TestPlan</span><span class="p">,</span> <span class="n">ThreadGroupWithRampUpAndHold</span><span class="p">,</span> <span class="n">SetupThreadGroup</span><span class="p">,</span> <span class="n">TeardownThreadGroup</span>
<span class="kn">from</span> <span class="nn">pymeter.api.samplers</span> <span class="kn">import</span> <span class="n">HttpSampler</span>


<span class="c1"># create HTTP sampler, sends a get request to the given url</span>
<span class="n">http_sampler1</span> <span class="o">=</span> <span class="n">HttpSampler</span><span class="p">(</span><span class="s2">&quot;echo_get_request&quot;</span><span class="p">,</span> <span class="s2">&quot;https://postman-echo.com/get?var=1&quot;</span><span class="p">)</span>
<span class="n">http_sampler2</span> <span class="o">=</span> <span class="n">HttpSampler</span><span class="p">(</span><span class="s2">&quot;echo_get_request&quot;</span><span class="p">,</span> <span class="s2">&quot;https://postman-echo.com/get?var=2&quot;</span><span class="p">)</span>
<span class="n">http_sampler3</span> <span class="o">=</span> <span class="n">HttpSampler</span><span class="p">(</span><span class="s2">&quot;echo_get_request&quot;</span><span class="p">,</span> <span class="s2">&quot;https://postman-echo.com/get?var=3&quot;</span><span class="p">)</span>


<span class="c1"># create a setup thread group</span>
<span class="n">thread_group_setup</span> <span class="o">=</span> <span class="n">SetupThreadGroup</span><span class="p">(</span><span class="n">http_sampler1</span><span class="p">)</span>

<span class="c1"># create a thread group that will rump up 10 threads in 1 second and hold the load for additional 10 seconds, give it the http sampler as a child input</span>
<span class="n">thread_group_main</span> <span class="o">=</span> <span class="n">ThreadGroupWithRampUpAndHold</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="n">http_sampler2</span><span class="p">)</span>

<span class="c1"># create a teardown thread group</span>
<span class="n">thread_group_setup</span> <span class="o">=</span> <span class="n">TeardownThreadGroup</span><span class="p">(</span><span class="n">http_sampler3</span><span class="p">)</span>

<span class="c1"># create a test plan with the required thread group</span>
<span class="n">test_plan</span> <span class="o">=</span> <span class="n">TestPlan</span><span class="p">(</span><span class="n">thread_group_setup</span><span class="p">,</span> <span class="n">thread_group_main</span><span class="p">,</span> <span class="n">thread_group_setup</span><span class="p">)</span>

<span class="c1"># run the test plan and take the results</span>
<span class="n">stats</span> <span class="o">=</span> <span class="n">test_plan</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>


<span class="c1"># Assert that the 99th percentile of response time is less than 2000 milliseconds.</span>
<span class="k">assert</span> <span class="p">(</span>
    <span class="n">stats</span><span class="o">.</span><span class="n">sample_time_99_percentile_milliseconds</span> <span class="o">&lt;=</span> <span class="mi">2000</span>
<span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;99th precentile should be less than 2000 milliseconds, got </span><span class="si">{</span><span class="n">stats</span><span class="o">.</span><span class="n">sample_time_99_percentile_milliseconds</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this heading">¶</a></h2>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="pymeter.api.config.SetupThreadGroup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymeter.api.config.</span></span><span class="sig-name descname"><span class="pre">SetupThreadGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymeter.api.config.SetupThreadGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseThreadGroup</span></code></p>
<p>thread group for setting up test from within the context of JMeter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>children</strong> (<em>ThreadGroupChildElement</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymeter.api.config.TeardownThreadGroup">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymeter.api.config.</span></span><span class="sig-name descname"><span class="pre">TeardownThreadGroup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymeter.api.config.TeardownThreadGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseThreadGroup</span></code></p>
<p>thread group for tearing down test from within the context of JMeter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>children</strong> (<em>ThreadGroupChildElement</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymeter.api.config.TestPlan">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymeter.api.config.</span></span><span class="sig-name descname"><span class="pre">TestPlan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymeter.api.config.TestPlan" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseConfigElement</span></code></p>
<p>This is the object that will call on the invocation of the test in the JMeter engine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>children</strong> (<em>TestPlanChildElement</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pymeter.api.config.TestPlan.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pymeter.api.config.TestPlan.run" title="Permalink to this definition">¶</a></dt>
<dd><p><em>run()</em> will execute the test plan code and return an object with aggregated results.</p>
<p>This method is <strong>blocking</strong> and therefore the entire program will hang until the method is completed.</p>
<p>By default, run prints stats to the stdio, for other reporting options please do check the <a class="reference external" href="reporters.html">reporters</a> page</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymeter.api.config.ThreadGroupSimple">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymeter.api.config.</span></span><span class="sig-name descname"><span class="pre">ThreadGroupSimple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_of_threads</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterations</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Thread</span> <span class="pre">Group'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymeter.api.config.ThreadGroupSimple" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseThreadGroup</span></code></p>
<p>Thread group defined by number of threads and number of iterations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_of_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>iterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>children</strong> (<em>ThreadGroupChildElement</em>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pymeter.api.config.ThreadGroupWithRampUpAndHold">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pymeter.api.config.</span></span><span class="sig-name descname"><span class="pre">ThreadGroupWithRampUpAndHold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">number_of_threads</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rampup_time_seconds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holdup_time_seconds</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">children</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Thread</span> <span class="pre">Group'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymeter.api.config.ThreadGroupWithRampUpAndHold" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseThreadGroup</span></code></p>
<p>Thread group that rumps up a number of thread in a given number of seconds and then holds the load for a given number of seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_of_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>rampup_time_seconds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – </p></li>
<li><p><strong>holdup_time_seconds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="index.html">
              <img class="logo" src="https://raw.githubusercontent.com/eldaduzman/pymeter/main/docs/user-guide/source/_static/pymeter-logo.png" alt="Logo"/>
            </a></p>
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">config</a><ul>
<li><a class="reference internal" href="#example-1">example - 1:</a></li>
<li><a class="reference internal" href="#example-2">example - 2:</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#pymeter.api.config.SetupThreadGroup"><code class="docutils literal notranslate"><span class="pre">SetupThreadGroup</span></code></a></li>
<li><a class="reference internal" href="#pymeter.api.config.TeardownThreadGroup"><code class="docutils literal notranslate"><span class="pre">TeardownThreadGroup</span></code></a></li>
<li><a class="reference internal" href="#pymeter.api.config.TestPlan"><code class="docutils literal notranslate"><span class="pre">TestPlan</span></code></a><ul>
<li><a class="reference internal" href="#pymeter.api.config.TestPlan.run"><code class="docutils literal notranslate"><span class="pre">TestPlan.run()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pymeter.api.config.ThreadGroupSimple"><code class="docutils literal notranslate"><span class="pre">ThreadGroupSimple</span></code></a></li>
<li><a class="reference internal" href="#pymeter.api.config.ThreadGroupWithRampUpAndHold"><code class="docutils literal notranslate"><span class="pre">ThreadGroupWithRampUpAndHold</span></code></a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
      <li><a href="api.html">Api Documentation</a>
        <ul>
          <li>Previous: <a href="api.html" title="previous chapter">Api Documentation</a>
          <li>Next: <a href="samplers.html" title="next chapter">samplers</a></ul>
      </li>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010 Eldad Uzman.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.2.2.
    </div>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>